!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.t=t();else if("function"==typeof define&&define.i)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).o=t()}}(function(){return function o(s,f,u){function c(i,t){if(!f[i]){if(!s[i]){var n="function"==typeof require&&require;if(!t&&n)return n(i,!0);if(h)return h(i,!0);var e=new Error("Cannot find module '"+i+"'");throw e.code="MODULE_NOT_FOUND",e}var r=f[i]={t:{}};s[i][0].call(r.t,function(t){return c(s[i][1][t]||t)},r,r.t,o,s,f,u)}return f[i].t}for(var h="function"==typeof require&&require,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,i,n){"use strict";var e,r=this&&this.s||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(n,"u",{value:!0});var s,o=(s=Error,r(f,s),f);function f(t,i){var n=this.constructor,e=s.call(this,i)||this,r=!1;if(e.constructor!==n&&(Object.setPrototypeOf&&Object.setPrototypeOf(e,n.prototype),r=!0),"stack"in e||(r=!0),e.name=t,r)if(Error.captureStackTrace)Error.captureStackTrace(e,n);else{var o=new Error(i);o.name=t;try{throw o}catch(o){e.stack=o.stack||String(o)}}return e}n.default=o},{}],2:[function(t,i,n){"use strict";Object.defineProperty(n,"u",{value:!0});var r,e,o,s,f,u=t("./async"),c=t("./rejections"),h=t("./Trace"),a=t("./util"),l=!1;function v(t,i){}function d(){}(o=e=e||{})[o.h=0]="Pending",o[o.l=1]="Fulfilled",o[o.v=2]="Rejected",(f=s=s||{})[f.p=1]="RejectionHandled",f[f.j=2]="UnhandledRejectionNotified";var p={error:void 0};function y(t){return t}var w,j=new h.default,b=0,m=(_.prototype.then=function(t,i){if(r&&r(this,"then("+typeof t+", "+typeof i+")"),1===this.m&&"function"!=typeof t||2===this.m&&"function"!=typeof i)return this;var n=new(Object.getPrototypeOf(this).constructor)(v);return n._(this),this.O(t,i,n,void 0),n},_.prototype.done=function(t,i){if(r&&r(this,"done("+typeof t+", "+typeof i+")"),1!==this.m||"function"==typeof t){var n=j;l&&(n=new h.default,this.P&&n.T(this.P)),this.O(t,i,void 0,n)}},_.prototype.catch=function(){if(1===arguments.length){var t=arguments[0];return this.then(void 0,t)}var r=arguments[0],o=arguments[1];return this.then(void 0,function(t){var i=!1;if("function"==typeof r)i=r.prototype instanceof Error||r===Error?t instanceof r:r(t);else{if(!Array.isArray(r))throw new TypeError("invalid predicate to .catch(), got "+typeof r);for(var n=0,e=r;n<e.length;n++)if(t instanceof e[n]){i=!0;break}}return i?o(t):_.reject(t)})},_.prototype.finally=function(t){function i(){return t(n)}var n=this;return this.then(i,i).g(this)},_.prototype.M=function(){return 1===this.m},_.prototype.R=function(){return 2===this.m},_.prototype.k=function(){return 0===this.m},_.prototype.value=function(){if(!this.M())throw new Error("Promise is not fulfilled");return this.A},_.prototype.reason=function(){if(!this.R())throw new Error("Promise is not rejected");return this.A},_.prototype.U=function(){this.q()},_.prototype.B=function(){return this.toString()},_.prototype.toString=function(){var t;switch(this.m){case 0:t="pending";break;case 1:t="fulfilled";break;case 2:t="rejected";break;default:t="unknown"}return"[Promise "+this.F+": "+t+"]"},_.prototype.S=function(n){return this.then(function(i){return new _(function(t){setTimeout(function(){return t(i)},n)})})},_.prototype.g=function(t){return void 0===t?this.then(d):this.then(function(){return t})},_.prototype.H=function(t){return this.then(function(){return _.reject(t)})},_.prototype._=function(t){this.P&&t.P&&this.P.T(t.P)},_.prototype.N=function(t){if(a.assert(0===this.m),t)if(this!==t){if(t instanceof _)return t._(this),t.q(),void(0===t.m?this.D(t):1===t.m?this.I(t.A):this.C(t.A));if("object"==typeof t||"function"==typeof t){var i=this.L(t);if(i===p)return void this.C(y(p.error));if("function"==typeof i)return void this.G(t,i)}this.I(t)}else this.C(new TypeError("cannot resolve Promise to self"));else this.I(t)},_.prototype.L=function(t){try{return t.then}catch(t){return p.error=t,p}},_.prototype.I=function(t){a.assert(0===this.m),r&&r(this,"_fulfill("+typeof t+")"),this.m=1,this.A=t,this.J()},_.prototype.C=function(t){if(a.assert(0===this.m),r&&r(this,"_reject("+t+")"),this.m=2,this.A=t,this.P&&this.A instanceof Error&&!this.A.trace){var i=this.P;this.A.trace=i;var n=this.A.stack;n&&Object.defineProperty(this.A,"stack",{K:!1,get:function(){return n+"\n  from Promise at:\n"+i.B()}})}1&this.V||u.default.W(_.X,this),this.J()},_.prototype.q=function(){!(1&this.V)&&2&this.V&&u.default.Y(_.Z,this),this.V|=1,r&&r(this,"rejectionHandled")},_.prototype.$=function(){1&this.V||2&this.V||(this.V|=2,u.default.Y(_.tt,this))},_.prototype.D=function(t){a.assert(0===this.m),r&&r(this,"_follow([Promise "+t.F+"])"),t.O(void 0,void 0,this,void 0)},_.prototype.G=function(t,i){var n=this;a.assert(0===this.m),r&&r(this,"_follow([Thenable])");var e=!1;try{i.call(t,function(t){e||(e=!0,n.N(t))},function(t){e||(e=!0,n.C(y(t)))})}catch(t){e||(e=!0,this.C(y(t)))}},_.prototype.O=function(t,i,n,e){var r={it:this,nt:t,et:i,rt:n,done:e};if(0!==this.m)u.default.Y(_.ot,r);else if(this.st){var o=this.st.length;this.st[o]=r}else this.st=[r];this.q()},_.prototype.J=function(){if(this.st){var t=0,i=this.st,n=i.length;for(this.st=void 0;t<n;)u.default.Y(_.ot,i[t++])}},_.prototype.ft=function(i){var t=1===this.m?i.nt:i.et;if(i.done){if(r&&r(this,"_unwrap()"),"function"!=typeof t)return void(2===this.m&&_.ut(this.A,i.done));a.assert(!w),w=this;try{var n=t(this.A);n&&(n instanceof _?n:_.resolve(n)).done(),w=void 0}catch(t){w=void 0,_.ut(t,i.done)}}else{var e=i.rt;if(r&&r(this,"_unwrap("+e.F+")"),"function"==typeof t){a.assert(!w),w=e;try{e.N(t(this.A))}catch(t){e.C(y(t))}w=void 0}else 1===this.m?e.I(this.A):e.C(this.A)}},_.resolve=function(t){var i=new _(v);return i.N(t),i},_.reject=function(t){var i=new _(v);return i.C(t),i},_.all=function(s){return new _(function(n,e){if(a.assert(Array.isArray(s),"thenables must be an Array"),0!==s.length)for(var r=new Array(s.length),o=s.length,t=0;t<s.length;t++)i(s[t],t);else n([]);function i(t,i){(t instanceof _?t:_.resolve(t)).done(function(t){r[i]=t,0==--o&&n(r)},function(t){return e(t)})}})},_.race=function(s){return new _(function(t,i){a.assert(Array.isArray(s),"thenables must be an Array");for(var n=0,e=s;n<e.length;n++){var r=e[n],o=r instanceof _?r:_.resolve(r);_.resolve(o).done(t,i)}})},_.defer=function(){var n,e;return{it:new _(function(t,i){n=t,e=i}),reject:e,resolve:n}},_.S=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(void 0!==arguments[1])return _.resolve(arguments[0]).S(arguments[1]);var n=arguments[0];return new _(function(t){setTimeout(t,n)})},_.ct=function(t){if(!0===t)_.ut=c.ht;else if(!1===t)_.ut=d;else{if("function"!=typeof t)throw new TypeError("invalid handler: boolean or function expected");_.ut=t}},_.at=function(t){if(!0===t)_.tt=c.lt;else if(!1===t)_.tt=d;else{if("function"!=typeof t)throw new TypeError("invalid handler: boolean or function expected");_.tt=t}},_.vt=function(t){if(!0===t)_.Z=c.dt;else if(!1===t)_.Z=d;else{if("function"!=typeof t)throw new TypeError("invalid handler: boolean or function expected");_.Z=t}},_.pt=function(t){l=t},_.yt=function(t){r="function"==typeof t?t:void 0},_.flush=function(){u.default.flush()},_.ot=function(t){t.it.ft(t)},_.X=function(t){t.$()},_);function _(t){var i=this;if(this.F=b++,this.m=0,this.A=void 0,this.st=void 0,this.V=0,this.P=void 0,r&&r(this,"construct"),l&&(this.P=new h.default(_),w&&this._(w)),t!==v){if("function"!=typeof t)throw new TypeError("Promise resolver is not a function");var n=!1;try{t(function(t){n||(n=!0,i.N(t))},function(t){n||(n=!0,i.C(y(t)))})}catch(t){n||(n=!0,this.C(y(t)))}}}(n.Promise=m).ct(!0),m.at(!0),m.vt(!0),n.default=m},{wt:4,jt:5,bt:8,_t:9}],3:[function(t,i,n){"use strict";Object.defineProperty(n,"u",{value:!0});var e="function"==typeof Error.captureStackTrace,r=(o.prototype.B=function(){var t=this.stack.split("\n");return t.shift(),t.join("\n")},o);function o(t){void 0===t&&(t=o),e?Error.captureStackTrace(this,t):this.stack="dummy\n<no trace>"}n.default=r},{}],4:[function(t,i,n){"use strict";Object.defineProperty(n,"u",{value:!0});var e=t("./Stack"),r=(o.prototype.T=function(t){t.Et?(this.Et=t.Et.concat(t.stack),this.Et.length>o.Ot&&(this.Et=this.Et.slice(0,o.Ot))):this.Et=[t.stack]},o.prototype.B=function(){var t=this.stack.B();if(this.Et)for(var i=this.Et.length-1;0<=i;i--)t+="\n  from previous:\n"+this.Et[i].B();return t},o.Ot=10,o);function o(t){void 0===t&&(t=o),this.stack=new e.default(t)}n.default=r},{Pt:3}],5:[function(t,i,n){"use strict";Object.defineProperty(n,"u",{value:!0});var e=t("./util"),r=(o.prototype.push=function(t,i){return this[this.length++]=t,this[this.length++]=i,this.length<this.Tt},o.prototype.flush=function(){for(;this.gt<this.length;){var t=this[this.gt],i=this[this.gt+1];this[this.gt]=this[this.gt+1]=void 0,this.gt+=2,t(i)}this.length=0,this.gt=0},o.prototype.empty=function(){return this.gt===this.length},o);function o(){this.length=0,this.Tt=1e3,this.gt=0}var s=(f.prototype.Y=function(t,i){this.Mt||(this.Mt=this.Rt.pop(),this.Mt||(this.Mt=new r),this.kt.push(this.Mt)),this.Mt.push(t,i)||(this.Mt=void 0)},f.prototype.flush=function(){for(;this.kt[0].flush(),1!==this.kt.length;)this.Rt.push(this.kt.shift());this.Mt=this.kt[0]},f.prototype.empty=function(){return 1===this.kt.length&&this.kt[0].empty()},f);function f(t){this.kt=[new r],this.Mt=this.kt[0],this.Rt=t}function u(t){"function"==typeof setImmediate?setImmediate(t):setTimeout(t,0)}var c=(h.prototype.At=function(t){e.assert(null==t||"function"==typeof t),this.xt=t},h.prototype.Y=function(t,i){this.Ut||this.qt||this.Bt(),this.Ft.Y(t,i)},h.prototype.W=function(t,i){this.Ut||this.qt||this.Bt(),this.St.Y(t,i)},h.prototype.flush=function(){e.assert(!this.Ut,"cannot recursively flush"),this.Ut=!0;try{for(;this.Ft.flush(),!this.St.empty();){var t=this.Ft;this.Ft=this.St,this.St=t}}finally{this.Ut=!1,this.Ft.empty()&&this.St.empty()||this.qt||this.Bt()}},h.prototype.Bt=function(){e.assert(!this.qt),(this.xt||u)(this.Ht),this.qt=!0},h.prototype.Nt=function(){this.qt=!1,this.flush()},h);function h(){var t=this;this.Rt=[],this.Ft=new s(this.Rt),this.St=new s(this.Rt),this.Ut=!1,this.qt=!1,this.xt=void 0,this.Ht=function(){return t.Nt()}}n.Dt=c,n.async=new c,n.default=n.async},{_t:9}],6:[function(t,i,n){"use strict";Object.defineProperty(n,"u",{value:!0});var e=t("./Promise");n.default=e.default,n.Promise=e.Promise;var r=t("./Trace");n.It=r.default;var o=t("./rejections");n.Ct=o.Ct,n.Lt=o.Lt;var s=t("./rejections");n.zt=s.Ct;var f=t("./polyfill");n.Gt=f.default;var u=t("./BaseError");n.Jt=u.default},{Kt:1,Qt:2,wt:4,Vt:7,bt:8}],7:[function(t,i,n){"use strict";Object.defineProperty(n,"u",{value:!0});var e=t("./Promise"),r=t("./util");n.default=function(t){void 0===t&&(t=!1);var i=r.Wt();return!!i&&(t||"function"!=typeof i.Promise?(i.Promise=e.Promise,!0):i.Promise instanceof e.Promise)}},{Qt:2,_t:9}],8:[function(t,i,n){"use strict";var e,r=this&&this.s||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(n,"u",{value:!0});var o,s=t("./BaseError"),f=t("./util"),u=(o=s.default,r(c,o),c);function c(t,i,n){var e=o.call(this,t,i+": "+n)||this;e.reason=n;var r=e.reason&&"object"==typeof e.reason&&e.reason.stack;return"string"!=typeof r&&(r=String(e.reason)),e.stack=e.name+": "+r,e}n.Xt=u;var h,a=(r(l,h=u),l);function l(t,i){var n=h.call(this,"UnhandledRejection","unhandled rejection",t)||this;return n.trace=i,n}n.Ct=a;var v,d=(r(p,v=u),p);function p(t){var i=v.call(this,"PossiblyUnhandledRejection","possibly unhandled rejection",t.reason())||this;return i.it=t,i}function y(t,i,n){var e=new PromiseRejectionEvent(t,{cancelable:!0,it:!0,reason:i});Object.defineProperty(e,"it",{value:n});var r=f.Wt();return!(!r.dispatchEvent||r.dispatchEvent(e))}n.Lt=d,n.ht=function(t,i){throw new a(t,i)},n.lt=function(t){var i=!0;if("undefined"!=typeof process&&"function"==typeof process.Yt?process.Yt("unhandledRejection",t.reason(),t)&&(i=!1):"function"==typeof PromiseRejectionEvent&&y("unhandledrejection",t.reason(),t)&&(i=!1),i){var n=new d(t);console.warn(n.stack)}},n.dt=function(t){"undefined"!=typeof process&&"function"==typeof process.Yt?process.Yt("rejectionHandled",t):"function"==typeof PromiseRejectionEvent&&y("rejectionhandled",t.reason(),t)}},{Kt:1,_t:9}],9:[function(t,i,n){"use strict";Object.defineProperty(n,"u",{value:!0}),n.assert=function(t,i){if(!t)throw new Error(i?"assertion failed: "+i:"assertion failed")},n.Wt=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;var t;try{t=new Function("return this")()}catch(t){}return t}},{}]},{},[6])(6)});
